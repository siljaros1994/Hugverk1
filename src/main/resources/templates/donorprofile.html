<!DOCTYPE html>
<html xmlns:th="https://thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Donor Profile</title>
    <link rel="stylesheet" type="text/css" th:href="@{/css/donorprofile.css}">
</head>
<body>

<div class="profile-container">
    <div class="profile-edit">
        <h2>Edit Profile</h2>

        <form th:action="@{/donorprofile/saveOrEdit}" th:object="${donorProfile}" method="post" enctype="multipart/form-data">

            <div class="form__field">
                <label for="profileImage">Profile Image:</label>
                <input type="file" id="profileImage" name="profileImage" accept="image/*">
            </div>

            <div class="form__field">
                <label for="eyeColor">Eye Color:</label>
                <select th:field="*{eyeColor}" id="eyeColor" required>
                    <option value="">--Select Eye Color--</option>
                    <option value="blue">Blue</option>
                    <option value="green">Green</option>
                    <option value="brown">Brown</option>
                    <option value="hazel">Hazel</option>
                    <option value="heterochromia">Heterochromia</option>
                </select>
            </div>
            <div class="form__field">
                <label for="hairColor">Hair Color:</label>
                <select th:field="*{hairColor}" id="hairColor" required>
                    <option value="">--Select Hair Color--</option>
                    <option value="blonde">Blonde</option>
                    <option value="brown">Brown</option>
                    <option value="black">Black</option>
                    <option value="red">Red</option>
                    <option value="strawberry-red">Strawberry Red</option>
                    <option value="white">White</option>
                </select>
            </div>
            <div class="form__field">
                <label for="educationLevel">Education Level:</label>
                <select th:field="*{educationLevel}" id="educationLevel" required>
                    <option value="">--Select Education Level--</option>
                    <option value="primary-school">Primary School</option>
                    <option value="secondary-school">Secondary School</option>
                    <option value="university">University</option>
                    <option value="other">Other</option>
                </select>
            </div>
            <div class="form__field">
                <label for="race">Race:</label>
                <select th:field="*{race}" id="race" required>
                    <option value="">--Select Race--</option>
                    <option value="asian">Asian</option>
                    <option value="black">Black</option>
                    <option value="caucasian">Caucasian</option>
                    <option value="hispanic">Hispanic</option>
                    <option value="native-american">Native American</option>
                    <option value="pacific-islander">Pacific Islander</option>
                    <option value="mixed">Mixed</option>
                </select>
            </div>
            <div class="form__field">
                <label for="ethnicity">Ethnicity:</label>
                <select th:field="*{ethnicity}" id="ethnicity" required>
                    <option value="">--Select Ethnicity--</option>
                    <option value="hispanic">Hispanic</option>
                    <option value="non-hispanic">Non-Hispanic</option>
                    <option value="african">African</option>
                    <option value="european">European</option>
                    <option value="asian">Asian</option>
                    <option value="middle-eastern">Middle Eastern</option>
                </select>
            </div>
            <div class="form__field">
                <label for="bloodType">Blood Type:</label>
                <select th:field="*{bloodType}" id="bloodType" required>
                    <option value="">--Select Blood Type--</option>
                    <option value="A+">A+</option>
                    <option value="A-">A-</option>
                    <option value="B+">B+</option>
                    <option value="B-">B-</option>
                    <option value="AB+">AB+</option>
                    <option value="AB-">AB-</option>
                    <option value="O+">O+</option>
                    <option value="O-">O-</option>
                </select>
            </div>
            <div class="form__field">
                <label for="medicalHistory">Family and Donor's Medical History:</label>
                <select th:field="*{medicalHistory}" id="medicalHistory" multiple>
                    <option value="cancer">Cancer</option>
                    <option value="heart-disease">Heart Disease</option>
                    <option value="diabetes">Diabetes</option>
                    <option value="asthma">Asthma</option>
                    <option value="high-blood-pressure">High Blood Pressure</option>
                </select>
            </div>

            <div class="form__field">
                <label for="height">Height (cm):</label>
                <input type="number" id="height" th:field="*{height}" min="50" max="250" required />
            </div>
            <div class="form__field">
                <label for="weight">Weight (kg):</label>
                <input type="number" id="weight" th:field="*{weight}" min="20" max="200" required />
            </div>
            <div class="form__field">
                <label for="age">Age:</label>
                <input type="number" id="age" th:field="*{age}" min="18" max="80" required />
            </div>

            <div class="form__field">
                <label for="getToKnow">Get to Know the Donor:</label>
                <textarea id="getToKnow" th:field="*{getToKnow}"></textarea>
            </div>

            <!--  Save/Edit Profile Button -->
            <div class="form__field">
                <button type="submit" th:text="${donorProfile.profileId == null ? 'Save Profile' : 'Edit Profile'}"></button>
            </div>
        </form>
    </div>

    <!-- Profile Information is Displayed -->
    <div class="profile-info">
        <h2>Profile Information</h2>
        <div class="profile-image">
            <img th:src="@{${donorProfile.imagePath}}" alt="Profile Image" th:if="${donorProfile.imagePath != null}">
        </div>
        <p>Donor ID: <span th:text="${donorProfile.user?.donorId ?: 'No ID available'}">Donor ID</span></p>
        <p>Eye Color: <span th:text="${donorProfile.eyeColor ?: 'Not specified'}">Eye Color</span></p>
        <p>Hair Color: <span th:text="${donorProfile.hairColor ?: 'Not specified'}">Hair Color</span></p>
        <p>Education Level: <span th:text="${donorProfile.educationLevel ?: 'Not specified'}">Education Level</span></p>
        <p>Race: <span th:text="${donorProfile.race ?: 'Not specified'}">Race</span></p>
        <p>Ethnicity: <span th:text="${donorProfile.ethnicity ?: 'Not specified'}">Ethnicity</span></p>
        <p>Blood Type: <span th:text="${donorProfile.bloodType ?: 'Not specified'}">Blood Type</span></p>
        <p>Family and Donor's Medical History:
            <span th:if="${donorProfile.medicalHistory != null}" th:text="${donorProfile.medicalHistory}">Medical History</span>
            <span th:if="${donorProfile.medicalHistory == null}">No history specified</span>
        </p>
        <p>Height: <span th:text="${donorProfile.height}">Height</span> cm</p>
        <p>Weight: <span th:text="${donorProfile.weight}">Weight</span> kg</p>
        <p>Age: <span th:text="${donorProfile.age}">Age</span></p>
        <p>Get to Know the Donor: <span th:text="${donorProfile.getToKnow ?: 'No information provided'}">Get to Know</span></p>
    </div>
</div>

</body>
</html>
